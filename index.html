<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>浏览器手机版本验证</title>
</head>
<body>
<script src="jquery-1.10.1.min.js"></script>
<script type="text/javascript" src="qrcode.js"></script>
<script>
  $(function() {
    var canvas = createCanvas("http://emptycup20.github.io/phoneWebTest/testWebVersion.html");
    $("#qrcodeCanvas").append(canvas);
  });

  var changeUrl = function(){
    var url = $("#urlToImg").val();
    if($.trim(url).length > 0){
      var canvas = createCanvas($.trim(url));
      $("#webCanvas").append(canvas);
    }
  }

  var createCanvas	= function(url){
    var background = "#ffffff";
    var foreground = "#000000";

    var qrcode	= new QRCode(-1, QRErrorCorrectLevel.H);
    qrcode.addData(url);
    qrcode.make();

    // create canvas element
    var canvas	= document.createElement('canvas');
    canvas.width	= 580;
    canvas.height	= 580;
    var ctx		= canvas.getContext('2d');

    // 文字说明
    ctx.fillStyle = "#fff";
    ctx.fillRect(0,0,580,100);
    ctx.fillStyle = "#999999";
    ctx.font = "26px 黑体";
    ctx.textBaseline = 'top';
    //填充字符串
    var text="使用二维码或验证码校验浏览器版本";
    ctx.fillText(text, 26, 26);

    // compute tileW/tileH based on options.width/options.height
    var tileW	= 200  / qrcode.getModuleCount();
    var tileH	= 200 / qrcode.getModuleCount();

    // draw in the canvas
    for( var row = 0; row < qrcode.getModuleCount(); row++ ){
      for( var col = 0; col < qrcode.getModuleCount(); col++ ){
        ctx.fillStyle = qrcode.isDark(row, col) ? foreground : background;
        var w = (Math.ceil((col+1)*tileW) - Math.floor(col*tileW));
        var h = (Math.ceil((row+1)*tileW) - Math.floor(row*tileW));
        ctx.fillRect(190 + Math.round(col*tileW), 100 + Math.round(row*tileH), w, h);
      }
    }

    // return just built canvas
    return canvas;
  }
</script>

<div id="qrcodeCanvas"></div>
转换url : <input id="urlToImg" />
<input type="button" value="转换" onclick="changeUrl()" />
<div id="webCanvas"></div>
</body>
</html>